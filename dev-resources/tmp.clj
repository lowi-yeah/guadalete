[{:name :foo, :job {:workflow [[:2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-in-0 :2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-inner] [:2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-in-1 :2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-inner] [:2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-inner :2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-out] [:2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-out :4a39db00-55c4-4f4f-937f-255b64af07ee-brightness] [:4a39db00-55c4-4f4f-937f-255b64af07ee-out :f106526c-d92a-4535-9b02-80dabf7d8a9e-in] [:quicksine-out :2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-in-0] [:4a39db00-55c4-4f4f-937f-255b64af07ee-brightness :4a39db00-55c4-4f4f-937f-255b64af07ee-inner] [:sine-out :2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-in-1] [:4a39db00-55c4-4f4f-937f-255b64af07ee-inner :4a39db00-55c4-4f4f-937f-255b64af07ee-out]], :lifecycles [{:lifecycle/task :sine-out, :lifecycle/calls :onyx.plugin.kafka/read-messages-calls} {:lifecycle/task :quicksine-out, :lifecycle/calls :onyx.plugin.kafka/read-messages-calls} {:lifecycle/task :2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-inner, :lifecycle/calls :guadalete.onyx.tasks.items.mixer/lifecycle-calls} {:lifecycle/task :f106526c-d92a-4535-9b02-80dabf7d8a9e-in, :lifecycle/calls :guadalete.onyx.tasks.async/publish-calls} {:lifecycle/task :f106526c-d92a-4535-9b02-80dabf7d8a9e-in, :lifecycle/calls :onyx.plugin.core-async/writer-calls}], :catalog [{:kafka/zookeeper "zookeeper1:2181", :onyx/plugin :onyx.plugin.kafka/read-messages, :filter/signal-id "sine", :onyx/medium :kafka, :kafka/offset-reset :largest, :kafka/force-reset? true, :onyx/batch-timeout 100, :onyx/type :input, :onyx/name :sine-out, :kafka/topic "gdlt-sgnl-v", :kafka/group-id nil, :onyx/max-peers 1, :onyx/min-peers 1, :onyx/doc "Consumes gdlt-sgnl-v messages from Kafka", :kafka/empty-read-back-off 50, :kafka/fetch-size 307200, :onyx/batch-size 1, :kafka/deserializer-fn :guadalete.onyx.tasks.util/deserialize-message-json, :kafka/wrap-with-metadata? false, :kafka/commit-interval 50, :kafka/chan-capacity 100} {:kafka/zookeeper "zookeeper1:2181", :onyx/plugin :onyx.plugin.kafka/read-messages, :filter/signal-id "quicksine", :onyx/medium :kafka, :kafka/offset-reset :largest, :kafka/force-reset? true, :onyx/batch-timeout 100, :onyx/type :input, :onyx/name :quicksine-out, :kafka/topic "gdlt-sgnl-v", :kafka/group-id nil, :onyx/max-peers 1, :onyx/min-peers 1, :onyx/doc "Consumes gdlt-sgnl-v messages from Kafka", :kafka/empty-read-back-off 50, :kafka/fetch-size 307200, :onyx/batch-size 1, :kafka/deserializer-fn :guadalete.onyx.tasks.util/deserialize-message-json, :kafka/wrap-with-metadata? false, :kafka/commit-interval 50, :kafka/chan-capacity 100} {:onyx/min-peers 1, :onyx/max-peers 1, :onyx/batch-size 1, :onyx/batch-timeout 100, :onyx/name :2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-in-1, :onyx/fn :clojure.core/identity, :onyx/type :function} {:onyx/min-peers 1, :onyx/max-peers 1, :onyx/batch-size 1, :onyx/batch-timeout 100, :onyx/name :2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-in-0, :onyx/fn :clojure.core/identity, :onyx/type :function} {:onyx/fn :guadalete.onyx.tasks.items.mixer/mix*, :onyx/uniqueness-key :at, :onyx/batch-timeout 100, :onyx/type :function, :onyx/name :2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-inner, :onyx/max-peers 1, :onyx/min-peers 1, :onyx/doc "Logs the color to the console for debugging", :mixer/fn :guadalete.onyx.tasks.items.mixer/avg, :onyx/batch-size 1} {:onyx/min-peers 1, :onyx/max-peers 1, :onyx/batch-size 1, :onyx/batch-timeout 100, :onyx/name :2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-out, :onyx/fn :clojure.core/identity, :onyx/type :function} {:onyx/fn :guadalete.onyx.tasks.items.color/log-color, :onyx/uniqueness-key :at, :onyx/batch-timeout 100, :onyx/type :function, :onyx/name :4a39db00-55c4-4f4f-937f-255b64af07ee-brightness, :onyx/max-peers 1, :onyx/min-peers 1, :color/channel :brightness, :onyx/doc "Logs the color to the console for debugging", :onyx/batch-size 1} {:onyx/min-peers 1, :onyx/max-peers 1, :onyx/batch-size 1, :onyx/batch-timeout 100, :onyx/name :4a39db00-55c4-4f4f-937f-255b64af07ee-inner, :onyx/fn :guadalete.onyx.tasks.items.color/inner-log, :onyx/type :function, :onyx/uniqueness-key :at, :onyx/doc "Logs the color to the console for debugging"} {:onyx/min-peers 1, :onyx/max-peers 1, :onyx/batch-size 1, :onyx/batch-timeout 100, :onyx/name :4a39db00-55c4-4f4f-937f-255b64af07ee-out, :onyx/fn :clojure.core/identity, :onyx/type :function} {:onyx/min-peers 1, :onyx/max-peers 1, :onyx/batch-size 1, :onyx/batch-timeout 100, :onyx/name :f106526c-d92a-4535-9b02-80dabf7d8a9e-in, :onyx/plugin :onyx.plugin.core-async/output, :onyx/type :output, :onyx/medium :core.async, :onyx/doc "Publishes segments to core.async"}], :triggers [], :windows [{:window/id :window-/f7697c30-79d1-11e6-a048-0fe2188ad3a9, :window/task :2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-inner, :window/type :global, :window/aggregation :guadalete.onyx.windowing/map-latest, :window/window-key :at, :map-key :id}], :flow-conditions [{:flow/from :sine-out, :flow/to :all, :flow/predicate :guadalete.onyx.filters/signal-id, :flow/short-circuit? true} {:flow/from :quicksine-out, :flow/to :all, :flow/predicate :guadalete.onyx.filters/signal-id, :flow/short-circuit? true} {:flow/from :2a512d98-42ac-42d1-b5cf-bbf58c13a4d5-inner, :flow/to :all, :flow/predicate :guadalete.onyx.tasks.items.mixer/mixed?, :flow/exclude-keys [:mixed], :flow/short-circuit? true, :flow/doc "Emits segment iff it is a mixed signal"}], :task-scheduler :onyx.task-scheduler/balanced}} {:name :signal/value-logger, :job {:workflow [[:read-from-kafka :write-to-redis]], :lifecycles [{:lifecycle/task :read-from-kafka, :lifecycle/calls :onyx.plugin.kafka/read-messages-calls} {:redis/uri "redis://redis1:6379", :redis/read-timeout-ms 8000, :redis/signal-prefix "sgnl", :redis/namespace "gdlt", :lifecycle/task :write-to-redis, :lifecycle/calls :guadalete.onyx.tasks.redis/timeseries-lifecycle, :onyx/param? true, :lifecycle/doc "Initialises the redis-timeseries-lifecycle"}], :catalog [{:kafka/zookeeper "zookeeper1:2181", :onyx/plugin :onyx.plugin.kafka/read-messages, :onyx/medium :kafka, :kafka/offset-reset :largest, :kafka/force-reset? true, :onyx/batch-timeout 100, :onyx/type :input, :onyx/name :read-from-kafka, :kafka/topic "gdlt-sgnl-v", :kafka/group-id "signal-value-consumer", :onyx/max-peers 1, :onyx/min-peers 1, :onyx/doc "Consumes gdlt-sgnl-v messages from Kafka", :kafka/empty-read-back-off 50, :kafka/fetch-size 307200, :onyx/batch-size 1, :kafka/deserializer-fn :guadalete.onyx.tasks.util/deserialize-message-json, :kafka/wrap-with-metadata? false, :kafka/commit-interval 50, :kafka/chan-capacity 100} {:onyx/fn :clojure.core/identity, :onyx/plugin :onyx.peer.function/function, :onyx/medium :function, :onyx/batch-timeout 100, :onyx/type :output, :onyx/name :write-to-redis, :onyx/max-peers 1, :onyx/min-peers 1, :onyx/doc "Provide an anchor where lifecycle functions can hook into… ", :onyx/batch-size 1}], :triggers [], :windows [], :flow-conditions [], :task-scheduler :onyx.task-scheduler/balanced}} {:name :signal/config-handler, :job {:workflow [[:read-from-kafka :write-to-rethink]], :lifecycles [{:lifecycle/task :read-from-kafka, :lifecycle/calls :onyx.plugin.kafka/read-messages-calls} {:lifecycle/task :write-to-rethink, :lifecycle/calls :guadalete.onyx.tasks.rethink/rethink-lifecycle, :rethinkdb/host "127.0.0.1", :rethinkdb/port 28015, :rethinkdb/auth-key "", :rethinkdb/db "guadalete", :rethinkdb/tables ["signal" "light" "room" "switch"], :rethinkdb/table "signal"}], :catalog [{:kafka/zookeeper "zookeeper1:2181", :onyx/plugin :onyx.plugin.kafka/read-messages, :onyx/medium :kafka, :kafka/offset-reset :largest, :kafka/force-reset? true, :onyx/batch-timeout 100, :onyx/type :input, :onyx/name :read-from-kafka, :kafka/topic "gdlt-sgnl-c", :kafka/group-id "signal-config-consumer", :onyx/max-peers 1, :onyx/min-peers 1, :onyx/doc "Consumes gdlt-sgnl-c messages from Kafka", :kafka/empty-read-back-off 50, :kafka/fetch-size 307200, :onyx/batch-size 1, :kafka/deserializer-fn :guadalete.onyx.tasks.util/deserialize-message-json, :kafka/wrap-with-metadata? false, :kafka/commit-interval 50, :kafka/chan-capacity 100} {:onyx/fn :clojure.core/identity, :onyx/plugin :onyx.peer.function/function, :onyx/medium :function, :onyx/batch-timeout 100, :onyx/type :output, :onyx/name :write-to-rethink, :onyx/max-peers 1, :onyx/min-peers 1, :onyx/doc "Does nothing (identity) but provide a place where lifecycle functions can hook into… ", :onyx/batch-size 1}], :triggers [], :windows [], :flow-conditions [], :task-scheduler :onyx.task-scheduler/balanced}}]